<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Project Cinch Route</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div id="page-container">
      <h1>Route Documentation</h1>
      <h2>Authorization Routes</h2>
      <section class="authorization-routes">
        <div class="card">
          <h3>New User Registration <span>POST(/register)</span></h3>
          <p>
            This route to register new users. We use the Argon2 NPM package to
            hash the password in order to keep the user's password private. This
            route sends the following to the database.
          </p><br>
          <ul>
            <li>id (generated by DB)</li>
            <li>first_name (Required)</li>
            <li>last_name (Required)</li>
            <li>position (Required)</li>
            <li>email (Required)</li>
            <li>phone</li>
            <li>pay_rate</li>
            <li>user_name (Required)</li>
            <li>password_hash (Required)</li>
            <li>organization_id</li>
          </ul>
        </div>
        <div class="card">
          <h3>Login <span>POST(/login)</span></h3>
          <p>
            This route verifies the user's login credentials by querying the
            database and confirming the username and password match records in
            the users table.
          </p>
          <br />
          <p>
            We use argon2 to verify the username and password, and we use the
            JSON Web Token package to create and sign a token once the
            credentials are verified. We send the signed token back to be
            consumed by the API for other routes.
          </p>
        </div>
      </section>
      <h2>User Routes</h2>
      <section class="user-routes">
        <div class="get-all-update-delete card">
          <h3>Get All Users: <span>GET(/users)</span></h3>
          <p>Gets all users and responds with:</p><br>
          <ul>
            <li>id <span>(Auto Generated in mySQL)</span></li>
            <li>first_name</li>
            <li>last_name</li>
            <li>job_title</li>
          </ul>
          <h3>Update Users by ID: <span>PUT(/users/:id)</span></h3>
          <ul>
            <li>
              Updates existing record indicated by the client as a path
              parameter.
            </li>
            <li>
              Once record is updated a response is sent that includes the
              updated user object.
            </li>
          </ul>
          <h3>Delete Users by ID: <span>Delete(/users/:id)</span></h3>
          <ul>
            <li>
              Using a path parameter to identify a user that will be deleted.
            </li>
            <li>
              After the delete user query is executed, we send a response with
              the number of rows "affected".
            </li>
          </ul>
        </div>
        <div class="get-user-id card">
          <h3>Get User By ID: <span>GET(/users/:id)</span></h3>
          <p>Responds with all table data associated with a user ID.</p><br>
          <p>ID is determined by using a path parameter.</p><br>
          <ul>
            <li>id <span>(Auto Generated in mySQL)</span></li>
            <li>first_name</li>
            <li>last_name</li>
            <li>job_title</li>
            <li>job_title</li>
            <li>email</li>
            <li>phone</li>
            <li>pay_rate</li>
            <li>username</li>
            <li>password</li>
          </ul>
          <p class="note">
            Note: I will need to hash this password in the future.
          </p>
        </div>
      </section>
      </section>
      <h2>Project Routes</h2>
      <section class="project-routes">
        <div class="card">
          <h3>Get All Projects: <span>GET(/projects)</span></h3>
          <p>Gets all of the logged in user's projects and responds with:</p><br>
          <ul>
            <li>id <span>(Auto Generated in mySQL)</span></li>
            <li>project_name</li>
            <li>street_1</li>
            <li>street_2</li>
            <li>city</li>
            <li>state</li>
            <li>project_status</li>
            <li>project_margin</li>
            <li>original_revenue</li>
            <li>adjusted_revenue</li>
            <li>estimated_start_date</li>
            <li>estimated_complete_date</li>
            <li>user_id <span>(from the request object)</span></li>
          </ul>
          <h3>Update Projects by ID: <span>PUT(/project/:id)</span></h3>
          <ul>
            <li>
              Updates existing record indicated by the client as a path
              parameter.
            </li>
            <li>Only projects with a user_id that matches the logged in user can
            be updated.</li>
            <li>
              Once record is updated a response is sent that includes the
              updated project object.
            </li>
          </ul>
          <h3>Delete Project by ID: <span>Delete(/project/:id)</span></h3>
          <ul>
            <li>
              Using a path parameter to identify a user that will be deleted.
            </li>
            <li>Only projects with a user_id that matches the logged in user can
            be deleted.</li>
            <li>
              After the delete user query is executed, we send either a response
              with the number of rows "affected" or a message saying no records
              were deleted.
            </li>
          </ul>
        </div>
        <div class="get-user-id card">
          <h3>Get Project By ID: <span>GET(/project/:id)</span></h3>
          <p>Responds with all table data associated with a project ID. Only
          projects with the same user_id as the user that is logged in can be accessed.</p><br>
          <p>ID is determined by using a path parameter.</p><br>
          <ul>
            <li>id</li>
            <li>project_name</li>
            <li>street_1</li>
            <li>street_2</li>
            <li>city</li>
            <li>state</li>
            <li>zip</li>
            <li>project_status</li>
            <li>project_margin</li>
            <li>original_revenue</li>
            <li>adjusted_revenue</li>
            <li>budgeted_material_expense</li>
            <li>budgeted_labor_expense</li>
            <li>budgeted_miscellaneous_expense</li>
            <li>budgeted_subcontractor_expense</li>
            <li>adjusted_material_expense</li>
            <li>adjusted_labor_expense</li>
            <li>adjusted_miscellaneous_expense</li>
            <li>adjusted_subcontractor_expense</li>
            <li>actual_material_expense</li>
            <li>actual_labor_expense</li>
            <li>actual_miscellaneous_expense</li>
            <li>actual_subcontractor_expense</li>
            <li>estimated_material_expense</li>
            <li>estimated_labor_expense</li>
            <li>estimated_miscellaneous_expense</li>
            <li>estimated_subcontractor_expense</li>
            <li>estimated_start_date</li>
            <li>estimated_complete_date</li>
            <li>actual_start_date</li>
            <li>actual_complete_date</li>
            <li>user_id <span>(from the request object)</span></li>
          </ul>
        </div>
        <div class="card">
          <h3>Create New Project: <span>POST(/projects)</span></h3>
          <p>We input the new project based on the request body.</p><br>
          <p>The user_id of the user that created the project will be
          automatically inserted into the request object. That means the user
          that creates the project will be able to access it in the future.</p><br>
          <p>New Users include the following.</p><br>
          <ul>
            <li>id <span>(Auto Generated in mySQL)</span></li>
            <li>project_name</li>
            <li>street_1</li>
            <li>street_2</li>
            <li>city</li>
            <li>state</li>
            <li>zip</li>
            <li>project_status</li>
            <li>project_margin</li>
            <li>original_revenue</li>
            <li>adjusted_revenue</li>
            <li>budgeted_material_expense</li>
            <li>budgeted_labor_expense</li>
            <li>budgeted_miscellaneous_expense</li>
            <li>budgeted_subcontractor_expense</li>
            <li>adjusted_material_expense</li>
            <li>adjusted_labor_expense</li>
            <li>adjusted_miscellaneous_expense</li>
            <li>adjusted_subcontractor_expense</li>
            <li>actual_material_expense</li>
            <li>actual_labor_expense</li>
            <li>actual_miscellaneous_expense</li>
            <li>actual_subcontractor_expense</li>
            <li>estimated_material_expense</li>
            <li>estimated_labor_expense</li>
            <li>estimated_miscellaneous_expense</li>
            <li>estimated_subcontractor_expense</li>
            <li>estimated_start_date</li>
            <li>estimated_complete_date</li>
            <li>actual_start_date</li>
            <li>actual_complete_date</li>
            <li>user_id <span>(from the request object)</span></li>
          </ul>
          <p>
            Once the new project is created, we send a response that includes
            the new project object.
          </p>
        </div>
      </section>
      <figure>
        <img src="./PM-Cinch-ERD-10102022.svg" alt="ERD Diagram">
      </figure>
      
        </div>
  </body>
</html>
